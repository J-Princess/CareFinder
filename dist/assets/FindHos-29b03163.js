import{d as L,r as y,h as B,i as P,o as m,c as g,a as h,_ as H,j as a,w as I,v as D,b,k as N,F,t as v,l as R,m as T,p as V,n as G,g as j}from"./index-9691e490.js";const x=l=>(V("data-v-fda2315c"),l=l(),G(),l),q={class:"container-fluid mt-3"},A={class:"container my-4",style:{width:"90%",margin:"auto"}},z=x(()=>a("div",{id:"map"},null,-1)),O={class:"container-fluid mt-5"},U=x(()=>a("h2",{class:"text-secondary"},"Nearby Hospitals:",-1)),Y={class:"row",style:{margin:"auto"}},K={class:"card-body pt-5 px-2"},W=["src"],Q={class:"card-title mt-2"},X={class:"card-text"},Z=L({__name:"FindHos",setup(l){let s,i,d;const c=[],p=y(""),u=y([]),w=()=>{s=new google.maps.Map(document.getElementById("map"),{center:{lat:9.0778,lng:8.6775},zoom:6}),d=new google.maps.places.SearchBox(document.getElementById("search-box"));const e=document.createElement("button");e.textContent="Pan to Current Location",e.classList.add("custom-map-control-button"),s.controls[google.maps.ControlPosition.TOP_CENTER].push(e),e.addEventListener("click",()=>{f()}),i=new google.maps.InfoWindow,s.addListener("bounds_changed",()=>{d.setBounds(s.getBounds())}),d.addListener("places_changed",()=>{const o=d.getPlaces();if(o.length===0)return;c.forEach(t=>t.setMap(null)),c.length=0;const n=new google.maps.LatLngBounds;o.forEach(t=>{if(!t.geometry){console.log("Returned place contains no geometry");return}const r=new google.maps.Marker({map:s,position:t.geometry.location,title:t.name});c.push(r),n.extend(t.geometry.location)}),s.fitBounds(n)})},_=(e,o,n)=>{o.setPosition(n),o.setContent(e?"Error: The Geolocation service failed. Give browser access to your location":"Error: Your browser doesn't support geolocation."),o.open(s)},k=()=>{if(p.value){const e={location:s.getCenter(),radius:5e3,keyword:"hospital"};new google.maps.places.PlacesService(s).nearbySearch(e,(n,t)=>{t===google.maps.places.PlacesServiceStatus.OK&&n&&(u.value=n,c.forEach(r=>r.setMap(null)),c.length=0,n.forEach(r=>{if(r.geometry&&r.geometry.location){const S=new google.maps.Marker({map:s,position:r.geometry.location,title:r.name});c.push(S)}}))})}},f=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{const o={lat:e.coords.latitude,lng:e.coords.longitude};i.setPosition(o),i.setContent("Location found."),i.open(s),s.setCenter(o),M(o)},()=>{_(!0,i,s.getCenter())}):_(!1,i,s.getCenter())},M=e=>{const o={location:e,radius:1e3,type:"hospital"};new google.maps.places.PlacesService(s).nearbySearch(o,(t,r)=>{r===google.maps.places.PlacesServiceStatus.OK&&(u.value=t,clearMarkers(),E(t),c.push(new google.maps.Marker({map:s,icon,title:place.name,position:place.geometry.location})))})},C=e=>e.photos&&e.photos.length>0?e.photos[0].getUrl({maxWidth:300,maxHeight:300}):"https://images.unsplash.com/photo-1647221597837-ff41b73a7f54?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2064&q=80",E=e=>{for(const o of e)if(o.geometry&&o.geometry.location){const n=new google.maps.Marker({position:o.geometry.location,map:s});c.push(n)}};return B(()=>{const e=document.createElement("script");e.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAY2ez0sDkoi-3VjuLN98e1EZRsHHX2RqM&libraries=places&callback=initMap",e.defer=!0,e.async=!0,document.head.appendChild(e),window.initMap=w}),(e,o)=>{const n=P("RouterLink");return m(),g(b,null,[h(H),a("div",q,[a("div",A,[I(a("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=t=>p.value=t),id:"search-box",placeholder:"Enter location",style:{"background-color":"black","border-radius":"10px",width:"80%"},name:"address"},null,512),[[D,p.value]]),a("button",{onClick:k,style:{padding:"13px 40px","margin-left":"10px","border-radius":"10px",border:"none"}},"Search"),a("button",{class:"custom-map-control-button mt-3 ml-2 border-0 p-2",onClick:f,style:{"border-radius":"10px",background:"rgb(7, 205, 142)"}},"Go to my Location")]),z,a("div",O,[U,a("ul",null,[a("div",Y,[(m(!0),g(b,null,N(u.value,t=>(m(),g("li",{key:t.place_id,class:"card col-sm-4 border-0",style:{height:"400px"}},[a("div",K,[a("img",{src:C(t),alt:"Hospital Photo",style:{"border-radius":"10px width: 15rem",height:"10rem"}},null,8,W),a("h5",Q,v(t.name),1),a("p",X,v(t.vicinity),1),a("p",null,[h(n,{to:"/sign"},{default:R(()=>[T("See More")]),_:1})])])]))),128))])])])]),h(F)],64)}}});const J=j(Z,[["__scopeId","data-v-fda2315c"]]);export{J as default};
