import{d as L,r as f,g as P,h as B,o as m,c as g,a as h,_ as H,i as n,w as I,v as N,b as v,j as T,F,t as x,k as R,l as V,p as j,m as q,f as z}from"./index-7f288414.js";const b=l=>(j("data-v-d3e93fda"),l=l(),q(),l),D={class:"container-fluid mt-3"},O={class:"container my-4",style:{width:"90%",margin:"auto"}},U=b(()=>n("div",{id:"map"},null,-1)),A={class:"container-fluid mt-5",style:{margin:"auto"}},G=b(()=>n("h2",{class:"text-light"},"Nearby Hospitals:",-1)),K={class:"ml-5 row"},Y={class:"card-body pt-5 px-2"},Q=["src"],W={class:"card-title mt-2"},X={class:"card-text"},Z=L({__name:"FindHos",setup(l){let s,i,d;const c=[],p=f(""),u=f([]),k=()=>{s=new google.maps.Map(document.getElementById("map"),{center:{lat:9.0778,lng:8.6775},zoom:6}),d=new google.maps.places.SearchBox(document.getElementById("search-box"));const e=document.createElement("button");e.textContent="Pan to Current Location",e.classList.add("custom-map-control-button"),s.controls[google.maps.ControlPosition.TOP_CENTER].push(e),e.addEventListener("click",()=>{y()}),i=new google.maps.InfoWindow,s.addListener("bounds_changed",()=>{d.setBounds(s.getBounds())}),d.addListener("places_changed",()=>{const o=d.getPlaces();if(o.length===0)return;c.forEach(t=>t.setMap(null)),c.length=0;const a=new google.maps.LatLngBounds;o.forEach(t=>{if(!t.geometry){console.log("Returned place contains no geometry");return}const r=new google.maps.Marker({map:s,position:t.geometry.location,title:t.name});c.push(r),a.extend(t.geometry.location)}),s.fitBounds(a)})},_=(e,o,a)=>{o.setPosition(a),o.setContent(e?"Error: The Geolocation service failed.":"Error: Your browser doesn't support geolocation."),o.open(s)},w=()=>{if(p.value){const e={location:s.getCenter(),radius:5e3,keyword:"hospital"};new google.maps.places.PlacesService(s).nearbySearch(e,(a,t)=>{t===google.maps.places.PlacesServiceStatus.OK&&a&&(u.value=a,c.forEach(r=>r.setMap(null)),c.length=0,a.forEach(r=>{if(r.geometry&&r.geometry.location){const S=new google.maps.Marker({map:s,position:r.geometry.location,title:r.name});c.push(S)}}))})}},y=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{const o={lat:e.coords.latitude,lng:e.coords.longitude};i.setPosition(o),i.setContent("Location found."),i.open(s),s.setCenter(o),C(o)},()=>{_(!0,i,s.getCenter())}):_(!1,i,s.getCenter())},C=e=>{const o={location:e,radius:1e3,type:"hospital"};new google.maps.places.PlacesService(s).nearbySearch(o,(t,r)=>{r===google.maps.places.PlacesServiceStatus.OK&&(u.value=t,clearMarkers(),M(t),c.push(new google.maps.Marker({map:s,icon,title:place.name,position:place.geometry.location})))})},E=e=>e.photos&&e.photos.length>0?e.photos[0].getUrl({maxWidth:300,maxHeight:300}):"https://unsplash.com/photos/sbu3lTahl-o",M=e=>{for(const o of e)if(o.geometry&&o.geometry.location){const a=new google.maps.Marker({position:o.geometry.location,map:s});c.push(a)}};return P(()=>{const e=document.createElement("script");e.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAY2ez0sDkoi-3VjuLN98e1EZRsHHX2RqM&libraries=places&callback=initMap",e.defer=!0,e.async=!0,document.head.appendChild(e),window.initMap=k}),(e,o)=>{const a=B("RouterLink");return m(),g(v,null,[h(H),n("div",D,[n("div",O,[I(n("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=t=>p.value=t),id:"search-box",placeholder:"Enter location",style:{"background-color":"black","border-radius":"10px",width:"80%"},name:"address"},null,512),[[N,p.value]]),n("button",{onClick:w,style:{padding:"13px 40px","margin-left":"10px","border-radius":"10px",border:"none"}},"Search"),n("button",{class:"custom-map-control-button",onClick:y},"Go to my Location")]),U,n("div",A,[G,n("ul",null,[n("div",K,[(m(!0),g(v,null,T(u.value,t=>(m(),g("li",{key:t.place_id,class:"card col-sm-3 m-4 border-0 mx-4",style:{width:"600px",height:"400px"}},[n("div",Y,[n("img",{src:E(t),alt:"Hospital Photo",style:{"border-radius":"10px width: 18rem",height:"10rem"}},null,8,Q),n("h5",W,x(t.name),1),n("p",X,x(t.vicinity),1),n("p",null,[h(a,{to:"/sign"},{default:R(()=>[V("See More")]),_:1})])])]))),128))])])])]),h(F)],64)}}});const J=z(Z,[["__scopeId","data-v-d3e93fda"]]);export{J as default};
